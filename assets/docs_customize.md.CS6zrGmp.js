import{_ as i,c as s,o as a,a2 as t}from"./chunks/framework.BJ0zSiM-.js";const E=JSON.parse('{"title":"Customize the Domain Name","description":"","frontmatter":{},"headers":[],"relativePath":"docs/customize.md","filePath":"docs/customize.md"}'),e={name:"docs/customize.md"},n=t(`<h1 id="customize-the-domain-name" tabindex="-1">Customize the Domain Name <a class="header-anchor" href="#customize-the-domain-name" aria-label="Permalink to &quot;Customize the Domain Name&quot;">​</a></h1><p>For compliance reasons, NetGuard ignores SDK initialization requests from <strong>China</strong>, so clients within China cannot connect directly to NetGuard servers.</p><p>If you need to provide services within China, you must use <a href="http://www.nginx.org" target="_blank" rel="noreferrer">Nginx</a> to forward SDK initialization requests to NetGuard servers.</p><div class="tip custom-block"><p class="custom-block-title">Please Note</p><ol><li>Only developers with <a href="./selfhosted.html">Self-hosted Servers</a> can customize the domain.</li><li>Only SDK initialization requests can be forwarded by Nginx.</li><li>App business data will not be forwarded through Nginx.</li></ol></div><h2 id="steps" tabindex="-1">Steps <a class="header-anchor" href="#steps" aria-label="Permalink to &quot;Steps&quot;">​</a></h2><h3 id="preparation" tabindex="-1">Preparation <a class="header-anchor" href="#preparation" aria-label="Permalink to &quot;Preparation&quot;">​</a></h3><p>You need to prepare the following:</p><ol><li>A domain name you own.</li><li>An <strong>overseas Server</strong> that can provide services <strong>within China</strong>.</li></ol><h3 id="set-up-nginx" tabindex="-1">Set up Nginx <a class="header-anchor" href="#set-up-nginx" aria-label="Permalink to &quot;Set up Nginx&quot;">​</a></h3><ol><li>Add a new virtual host (e.g., netguard.example.com) in Nginx configuration file, and add the following origin servers: <ul><li>d1.udptcp.com</li><li>d2.udptcp.com</li><li>d3.udptcp.com</li></ul></li><li>Add the corresponding DNS records in the domain registrar&#39;s control panel.</li><li>Modify the Nginx configuration file to <strong>add</strong> the following HTTP request headers:<table tabindex="0"><thead><tr><th>Header Name</th><th>Value</th><th>Note</th></tr></thead><tbody><tr><td>X-NETGUARD-ID</td><td>Your App ID</td><td>For identifying the developer</td></tr><tr><td>X-NETGUARD-KEY</td><td>Your App Key</td><td>For identifying the developer</td></tr><tr><td>TRUE-CLIENT-IP</td><td>Client&#39;s Real IP</td><td>For assigning forwarding servers</td></tr></tbody></table></li><li>If the HTTP request header is not added correctly, the following errors may occur：<table tabindex="0"><thead><tr><th>Reason</th><th>Error</th></tr></thead><tbody><tr><td>Missing X-NETGUARD-ID</td><td>Unable to assign forwarding server</td></tr><tr><td>Missing X-NETGUARD-KEY</td><td>Unable to assign forwarding server</td></tr><tr><td>Missing TRUE-CLIENT-IP</td><td>Unable to assign forwarding server</td></tr><tr><td>Incorrect TRUE-CLIENT-IP</td><td>Unable to provide DDoS protection</td></tr></tbody></table></li></ol><h2 id="modify-the-code" tabindex="-1">Modify the Code <a class="header-anchor" href="#modify-the-code" aria-label="Permalink to &quot;Modify the Code&quot;">​</a></h2><p>After integrating the NetGuard SDK according to the <a href="./integrate.html">Documentation</a>, some code adjustments are needed.</p><h3 id="microsoft-windows" tabindex="-1">Microsoft Windows <a class="header-anchor" href="#microsoft-windows" aria-label="Permalink to &quot;Microsoft Windows&quot;">​</a></h3><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Modify</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DEVELOPEMENT_APP_ID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// To</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;YOUR_DOMAIN&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DEVELOPEMENT_APP_ID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><h3 id="google-android" tabindex="-1">Google Android <a class="header-anchor" href="#google-android" aria-label="Permalink to &quot;Google Android&quot;">​</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Modify</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bool bInit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Shield.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DEVELOPEMENT_APP_ID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// To</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bool bInit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Shield.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;YOUR_DOMAIN&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DEVELOPEMENT_APP_ID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="apple-ios-ipados" tabindex="-1">Apple iOS/iPadOS <a class="header-anchor" href="#apple-ios-ipados" aria-label="Permalink to &quot;Apple iOS/iPadOS&quot;">​</a></h3><div class="language-objective-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">objective-c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Modify</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BOOL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bInit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [s </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Init:nil</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> key:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@&quot;DEVELOPEMENT_APP_ID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// To</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BOOL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bInit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [s </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Init:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@&quot;YOUR_DOMAIN&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> key:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@&quot;DEVELOPEMENT_APP_ID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span></code></pre></div><h2 id="if-nginx-is-attacked" tabindex="-1">If Nginx is attacked <a class="header-anchor" href="#if-nginx-is-attacked" aria-label="Permalink to &quot;If Nginx is attacked&quot;">​</a></h2><p>NetGuard&#39;s SDK caches the initialization results locally and will attempt to initialize from the cache if initialization fails.</p><p>Therefore, even if Nginx goes offline, the business won&#39;t be significantly affected, with only newly installed app users being impacted.</p><div class="tip custom-block"><p class="custom-block-title">Please Note</p><ol><li>You can add a CDN in front of Nginx to accelerate requests.</li><li>You can add a WAF in front of Nginx to block malicious requests.</li><li>The architecture should be: SDK --&gt; CDN (optional) --&gt; WAF (optional) --&gt; Nginx --&gt; NetGuard.</li></ol></div><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">​</a></h2><p>If the connection to the NetGuard server cannot be established after integration, please refer to the <a href="./qa.html">FAQ</a></p>`,24),l=[n];function h(o,r,d,p,k,c){return a(),s("div",null,l)}const u=i(e,[["render",h]]);export{E as __pageData,u as default};
